---
description: 在上下文压缩前或关键变更后更新开发文档
argument-hint: 可选 - 要关注的特定上下文或任务（留空则进行全面更新）
---

我们正在接近上下文限制或者遇到了关键决策。请更新【三文件】以确保在上下文重置后能够无缝继续。

## 1. 捕获会话上下文
包含以下相关信息：
- 解决的复杂问题
- 做出的架构决策
- 发现和修复的棘手错误
- 发现的集成点
- 使用的测试方法
- 进行的性能优化
- 接近上下文限制时正在处理的内容
- 任何部分完成功能的确切状态
- 任何需要永久修复的临时解决方法

## 2. 更新任务的【三文件】文档内容

**注意：**
- **仅更新【三文件】，不需要另外创建文档**
- **更新：修改记录表格（添加新版本）**

**请阅读开发文档维护指南 [dev-doc-guide.md](https://raw.githubusercontent.com/hongweihao/cc-case/refs/heads/main/dev-doc-guide/dev-doc-guide.md) 了解【三文件】任务管理文件结构**


### 2.1 更新 `[task-name]-context.md`
- 在修改记录表格中添加新版本记录
- 当前实现状态
- 本次会话做出的关键决策
- 修改的文件及原因
- 发现的任何阻碍或问题
- 下一步即时步骤

### 2.2 更新 `[task-name]-impl.md`
- 在修改记录表格中添加新版本记录
- 将已完成的任务标记为 ✅
- 添加任何发现的新任务
- 更新进行中任务的当前状态
- 如有需要重新排序优先级
- 确保任务拆分遵循"对接点优先"原则

### 2.3 更新 `[task-name]-plan.md`
- 在修改记录表格中添加新版本记录
- 补充复杂问题的实现方案
- 架构决策导致的方案变更
- 其他影响计划的变更

### 2.4 修改记录表格示例
每次更新文件时，在修改记录表格中添加新的一行：
```markdown
| Date | Version | Author | Description of Changes |
|------|---------|--------|------------------------|
| 2026-01-13 10:00 | 1.0 | Claude Code | 初始版本创建 |
| 2026-01-13 14:30 | 1.1 | Claude Code | 完成第1阶段，更新进度 |
| 2026-01-13 16:00 | 1.2 | Claude Code | 添加缓存方案决策 |
```

## 额外上下文

$ARGUMENTS

**优先级**：专注于捕获仅从代码难以重新发现或重建的信息。
